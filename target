#!/bin/bash

PROGRAM=""
NAME=""
TITLE=""
ALL=""

while getopts ":p:n:t:a:" opt; do
  case $opt in
    p)
      PROGRAM=$OPTARG
      ;;
    n)
      NAME=$OPTARG
      ;;
    t)
      TITLE=$OPTARG
      ;;
    a)
      ALL=$OPTARG
      ;;
    \?)
      echo "Invalid option: -$OPTARG" >&2
      ;;
  esac
done

if [ -z "$NAME" ]; then
    NAME=$ALL
fi

if [ -z "$PROGRAM" ]; then
    PROGRAM=$ALL
fi

if [ -z "$TITLE" ]; then
    TITLE=$ALL
fi

PID="$(pidof $NAME)"

if [ -z "$PID" ]; then
    $PROGRAM &>/dev/null &
fi

if [ -n "$TITLE" ]; then
  wmctrl -a $TITLE
fi